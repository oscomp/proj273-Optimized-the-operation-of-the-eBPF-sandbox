# proj273-基于eBPF的沙箱运行优化机制
# 标题：
   当前服务器无感知计算平台中，应用复杂多样。然而，不同应用具有不同的运行特征，适合不同的调度策略。此外，沙箱技术在保障函数隔离运行的同时，也带来了一定的性能损失。如何提高当前函数实例的运行效率，是一个亟待解决的问题。

# 项目描述：
   
##  WebAssembly(WASM)沙箱
   在 Serverless 计算中，现有的主流技术是利用沙箱容器技术，如 AWS Firecraker 或者阿里云沙箱容器，来实现强隔离的安全执行环境，但是也带来更大的资源消耗。虽然现在阿里云沙箱容器经过优化可以实现 300ms 的冷启动速度，但是还无法满足函数毫秒级的启动要求。目前需要通过的调度策略，预留一定的空闲实例才可以满足，但是这样也引入了更多的资源消耗。
   WASM是一个新的W3C规范，是一个通用、开放、安全的底层虚拟机抽象。其可以轻松实现毫秒级冷启动时间和极低的资源消耗。同时WASM字节码比原生机器码有更高的安全级别。此外，WASI 实现了细粒度基于能力的安全模型，遵循最小权限原则。在执行过程中，WASI 应用只能访问由依赖注入指明的确切资源集，这种方式与传统粗粒度的操作系统级隔离相比，进一步收敛了安全攻击面。正因如此，WASM得到了 Serverless、IoT/边缘计算等社区的广泛关注。Fastly、Cloudflare等厂商相继发布了基于WebAssembly技术实现了更加轻量化的 Serverless 服务。

## 内核调度机制：   
   当前服务器无感知计算平台会同时运行大量函数实例来完成用户的业务需求，主机操作系统内核对函数实例仅仅支持完全公平的调度策略（completely Fair Scheduler，CFS）。然而，不同负载具有不同的运行特征，适合不同的调度策略，需要云厂商根据当前负载情况自适应调整平台负载运行策略。当前开发者调整内核调度机制均需要重新编译和替换操作系统内核，效率非常低。为此，亟需在多实例环境中，支持内核调度器动态扩展调度策略，以满足不同负载的性能需求。此外，沙箱运行过程，其虚拟指令与主机操作系统的机器指令存在语义鸿沟，使得最终执行时操作繁复低效，导致性能比不使用沙箱的情况慢2-3倍。为此，需要针对负载运行特征，优化底层指令的执行，提高运行速度。

## eBPF技术：
   eBPF技术,在用户程序触发系统调用时注入预定义的代码，动态聚合分析操作行为，并对非法行为进行控制。该技术是目前热门的内核可编程机制，提供多语言无侵入的观测能力，兼具高性能高扩展特性，生态发展很好，未来前景广大，但当前其主要集中在网络性能优化和安全领域。我们创新性将其应用到操作系统内核的任务调度器和函数负载的底层执行中，为服务器无感知计算负载提供更加灵活高效的调度策略和执行优化，有利于后期的技术落地和社区推广。

# 目标：
   本赛题拟基于eBPF技术提高wasm沙箱在云环境中的运行效率，降低运行时间，提高应用端到端的响应时间

# 所属赛道：
   2024全国大学生操作系统比赛的“OS功能设计”赛道

# 参赛要求：
   以小组为单位参赛，最多三人一个小组，且小组成员是来自同一所高校的本科生或研究生（2024年春季学期或之后毕业的学生）。如学生参加了多个项目，参赛学生选择一个自己参加的项目参与评奖，并请遵循“2024全国大学生操作系统比赛”的章程和技术方案要求。

# 难度：
   高等

# 预期目标：
   目标一：测试当前负载运行过程存在的性能问题，并分析其根本原因
   目标二：基于eBPF实现对多沙箱实例的细粒度调度机制，保证不同沙箱都具有较高的运行效率
   目标三：基于eBPF实现对单沙箱实例的任务运行加速机制，保证单个沙箱在运行过程中的高效率


# 赛题分类
【code:301】2.3.1 虚拟化

# License
GPL-3.0 License

# 项目导师
- 姓名：樊浩
- 单位：华中科技大学
- email: haofan@hust.edu.cn
